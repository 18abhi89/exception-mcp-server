exception_id,event_id,error_message,exception_type,exception_category,exception_sub_category,source_system,times_replayed,trace,resolution,stacktrace
650e8400-e29b-41d4-a716-446655440001,EVT-H001,Unsupported event type 'TRANSFER' not in allowed list,ValidationException,VALIDATION,INVALID_EVENT,ATLAS,8,java.lang.IllegalArgumentException: Invalid event type,"Root cause: ATLAS system sending unsupported event types. Resolution: Added TRANSFER to allowed event types list in trade-ingestion-service configuration. Updated schema validation to accept new event type. No code changes needed.","java.lang.IllegalArgumentException: Invalid event type: TRANSFER
	at com.trading.validation.EventTypeValidator.validate(EventTypeValidator.java:45)
	at com.trading.ingestion.MessageProcessor.processMessage(MessageProcessor.java:112)
	at com.trading.kafka.ConsumerHandler.handleRecord(ConsumerHandler.java:78)
	at org.apache.kafka.clients.consumer.internals.ConsumerCoordinator.poll(ConsumerCoordinator.java:345)
	at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1234)"
650e8400-e29b-41d4-a716-446655440002,EVT-H002,DELETE operation on non-existent trade ID TRD-99999,OrderingException,SEQUENCING,OUT_OF_ORDER,ATLAS,12,java.lang.IllegalStateException: Trade not found,"Root cause: DELETE events arriving before corresponding NEW events due to Kafka partition lag. Resolution: Implemented grace period of 5 minutes for DELETE operations. If trade not found, message is parked in DLQ for retry. Also added trade existence check with cache lookup.","java.lang.IllegalStateException: Trade not found: TRD-99999
	at com.trading.service.TradeService.deleteTrade(TradeService.java:234)
	at com.trading.processor.DeleteEventProcessor.process(DeleteEventProcessor.java:89)
	at com.trading.ingestion.EventRouter.route(EventRouter.java:156)
	at com.trading.kafka.MessageHandler.handle(MessageHandler.java:67)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:1234)"
650e8400-e29b-41d4-a716-446655440003,EVT-H003,Schema validation failed: missing required field 'settlement_date',ValidationException,VALIDATION,INVALID_EVENT,trade-ingestion-service,10,javax.validation.ValidationException: Missing field,"Root cause: Upstream service not populating settlement_date for certain trade types. Resolution: Made settlement_date optional for CASH trades. Added default calculation logic for missing settlement dates based on trade_date + T+2 business days.","javax.validation.ValidationException: Missing required field: settlement_date
	at com.trading.validation.SchemaValidator.validateRequired(SchemaValidator.java:178)
	at com.trading.validation.SchemaValidator.validate(SchemaValidator.java:89)
	at com.trading.model.TradeEvent.validate(TradeEvent.java:456)
	at com.trading.ingestion.TradeIngestionService.ingest(TradeIngestionService.java:123)
	at com.trading.api.TradeController.receiveTrade(TradeController.java:67)"
650e8400-e29b-41d4-a716-446655440004,EVT-H004,Settlement date calculation failed: invalid business day,BusinessException,BUSINESS_LOGIC,CALCULATION_ERROR,trade-ingestion-service,15,java.time.DateTimeException: Invalid date,"Root cause: Holiday calendar not updated for 2025. Resolution: Updated holiday calendar service with 2025 dates. Added fallback logic to use next business day if calculated date is invalid. Implemented cache for business day lookups.","java.time.DateTimeException: Invalid settlement date calculation
	at com.trading.calculation.SettlementDateCalculator.calculateSettlementDate(SettlementDateCalculator.java:234)
	at com.trading.service.SettlementService.determineSettlement(SettlementService.java:145)
	at com.trading.processor.TradeEnrichmentProcessor.enrichTrade(TradeEnrichmentProcessor.java:89)
	at com.trading.ingestion.TradeIngestionService.process(TradeIngestionService.java:234)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)"
650e8400-e29b-41d4-a716-446655440005,EVT-H005,Version 10 received before version 9 for trade ID TRD-88888,OrderingException,SEQUENCING,OUT_OF_ORDER,ATLAS,6,java.lang.IllegalStateException: Version mismatch,"Root cause: Out-of-order message delivery from Kafka. Resolution: Implemented version gap detection with automatic parking. Messages with version gaps > 1 are parked for 2 minutes to allow missing versions to arrive. Added version sequence validator.","java.lang.IllegalStateException: Version mismatch - expected 9, got 10 for trade TRD-88888
	at com.trading.versioning.VersionValidator.validateSequence(VersionValidator.java:123)
	at com.trading.service.TradeVersionService.checkVersion(TradeVersionService.java:89)
	at com.trading.processor.VersionedEventProcessor.process(VersionedEventProcessor.java:156)
	at com.trading.ingestion.EventRouter.route(EventRouter.java:234)
	at com.trading.kafka.ConsumerHandler.handleRecord(ConsumerHandler.java:78)"
650e8400-e29b-41d4-a716-446655440006,EVT-H006,Event type field is null or empty in message,ValidationException,VALIDATION,INVALID_EVENT,ATLAS,5,java.lang.NullPointerException,"Root cause: Malformed messages from upstream with null event_type. Resolution: Added null-safety checks at ingestion boundary. Messages with null event_type are rejected immediately with clear error message sent back to upstream team via monitoring alert.","java.lang.NullPointerException: Event type cannot be null
	at com.trading.validation.EventTypeValidator.validate(EventTypeValidator.java:56)
	at com.trading.ingestion.MessageProcessor.preprocess(MessageProcessor.java:89)
	at com.trading.kafka.ConsumerHandler.handleRecord(ConsumerHandler.java:67)
	at org.apache.kafka.clients.consumer.internals.Fetcher.parseRecord(Fetcher.java:1234)
	at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1456)"
650e8400-e29b-41d4-a716-446655440007,EVT-H007,Duplicate event_id 'EVT-H007-DUP' detected in database,DuplicateException,DUPLICATE,PREVIOUSLY_PROCESSED_MESSAGE,ATLAS,0,com.trading.DuplicateMessageException,"Root cause: Kafka consumer group rebalance causing duplicate consumption. Resolution: Implemented idempotency key using event_id + event_version. Added unique constraint on (event_id, event_version) in database. Duplicates are now safely ignored.","com.trading.exception.DuplicateMessageException: Duplicate event_id: EVT-H007-DUP
	at com.trading.service.EventDeduplicationService.checkDuplicate(EventDeduplicationService.java:123)
	at com.trading.ingestion.MessageProcessor.processMessage(MessageProcessor.java:89)
	at com.trading.kafka.ConsumerHandler.handleRecord(ConsumerHandler.java:78)
	at org.springframework.kafka.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:234)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeOnMessage(KafkaMessageListenerContainer.java:1567)"
650e8400-e29b-41d4-a716-446655440008,EVT-H008,CANCEL event received before NEW event for trade ID TRD-55555,OrderingException,SEQUENCING,OUT_OF_ORDER,ATLAS,7,java.lang.IllegalStateException: Trade not found,"Root cause: Message ordering issue in Kafka topic. Resolution: Implemented temporal parking strategy. CANCEL/MODIFY/DELETE events for non-existent trades are parked for 3 minutes in memory cache. If NEW arrives within window, events are replayed in order. Otherwise, moved to DLQ.","java.lang.IllegalStateException: Trade not found for CANCEL operation: TRD-55555
	at com.trading.service.TradeService.cancelTrade(TradeService.java:345)
	at com.trading.processor.CancelEventProcessor.process(CancelEventProcessor.java:123)
	at com.trading.ingestion.EventRouter.route(EventRouter.java:189)
	at com.trading.kafka.MessageHandler.handle(MessageHandler.java:78)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer.invokeListener(KafkaMessageListenerContainer.java:1789)"
650e8400-e29b-41d4-a716-446655440009,EVT-H009,Connection timeout to settlement obligation service,TimeoutException,INFRASTRUCTURE,TIMEOUT,trade-consumer-service,20,java.net.SocketTimeoutException: Read timed out,"Root cause: SO service experiencing high load during peak hours. Resolution: Increased timeout from 5s to 15s. Implemented circuit breaker pattern with fallback to async processing. Added retry with exponential backoff (3 retries max).","java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at com.trading.client.SettlementObligationClient.callService(SettlementObligationClient.java:234)
	at com.trading.service.SettlementService.createObligation(SettlementService.java:156)
	at com.trading.processor.SettlementProcessor.process(SettlementProcessor.java:89)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:329)"
650e8400-e29b-41d4-a716-446655440010,EVT-H010,Invalid currency code 'XXX' in trade payload,ValidationException,VALIDATION,INVALID_EVENT,ATLAS,4,java.lang.IllegalArgumentException: Unknown currency,"Root cause: Upstream system sending test data to production. Resolution: Added currency code validation against ISO 4217 standard. Implemented whitelist of supported currencies. Invalid currencies now fail-fast with clear error message to upstream.","java.lang.IllegalArgumentException: Invalid currency code: XXX
	at com.trading.validation.CurrencyValidator.validate(CurrencyValidator.java:89)
	at com.trading.model.Trade.setCurrency(Trade.java:234)
	at com.trading.deserializer.TradeDeserializer.deserialize(TradeDeserializer.java:156)
	at com.trading.kafka.MessageHandler.deserializeMessage(MessageHandler.java:123)
	at com.trading.kafka.ConsumerHandler.handleRecord(ConsumerHandler.java:78)"
650e8400-e29b-41d4-a716-446655440011,EVT-H011,Database connection pool exhausted during peak load,InfrastructureException,INFRASTRUCTURE,RESOURCE_EXHAUSTION,trade-ingestion-service,25,com.zaxxer.hikari.pool.HikariPool$PoolInitializationException,"Root cause: Connection pool size too small for peak trading hours. Resolution: Increased pool size from 10 to 50 connections. Added connection leak detection (30 seconds). Implemented connection timeout monitoring and alerting. Optimized long-running queries.","com.zaxxer.hikari.pool.HikariPool$PoolInitializationException: Failed to initialize pool: Connection is not available
	at com.zaxxer.hikari.pool.HikariPool.throwPoolInitializationException(HikariPool.java:593)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:576)
	at com.trading.repository.TradeRepository.save(TradeRepository.java:123)
	at com.trading.service.TradeService.persistTrade(TradeService.java:234)
	at com.trading.processor.TradePersistenceProcessor.process(TradePersistenceProcessor.java:89)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:367)"
650e8400-e29b-41d4-a716-446655440012,EVT-H012,JSON parsing failed for malformed trade payload,ValidationException,VALIDATION,INVALID_EVENT,ATLAS,3,com.fasterxml.jackson.core.JsonParseException,"Root cause: Upstream service sending invalid JSON with unescaped characters. Resolution: Added robust JSON parsing with error recovery. Implemented pre-validation of message format before deserialization. Send alerts to upstream team for malformed messages.","com.fasterxml.jackson.core.JsonParseException: Unexpected character ('\"' (code 34)): was expecting comma to separate Object entries
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:1840)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:712)
	at com.trading.deserializer.TradeDeserializer.deserialize(TradeDeserializer.java:178)
	at com.trading.kafka.MessageHandler.deserializeMessage(MessageHandler.java:123)
	at com.trading.kafka.ConsumerHandler.handleRecord(ConsumerHandler.java:89)
	at org.apache.kafka.clients.consumer.ConsumerRecords.forEach(ConsumerRecords.java:234)"
650e8400-e29b-41d4-a716-446655440013,EVT-H013,Counterparty risk limit exceeded for CP-12345,BusinessException,BUSINESS_LOGIC,RISK_LIMIT_BREACH,trade-ingestion-service,5,com.trading.exception.RiskLimitException,"Root cause: Trade would cause counterparty exposure to exceed approved limit. Resolution: Implemented pre-trade risk check with real-time limit calculation. Trades exceeding limits are automatically rejected with clear message. Added override capability for authorized traders with audit trail.","com.trading.exception.RiskLimitException: Counterparty risk limit exceeded for CP-12345: Current=95M, Limit=100M, Trade=8M
	at com.trading.risk.RiskCalculator.checkCounterpartyLimit(RiskCalculator.java:234)
	at com.trading.service.RiskService.validateTrade(RiskService.java:156)
	at com.trading.processor.RiskCheckProcessor.process(RiskCheckProcessor.java:89)
	at com.trading.ingestion.TradeIngestionService.processTrade(TradeIngestionService.java:234)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)"
650e8400-e29b-41d4-a716-446655440014,EVT-H014,Trade reference data lookup failed for instrument ISIN12345,DataNotFoundException,BUSINESS_LOGIC,MISSING_REFERENCE_DATA,trade-ingestion-service,8,com.trading.exception.ReferenceDataNotFoundException,"Root cause: Reference data service not in sync with trading system. Resolution: Implemented reference data caching with TTL. Added fallback to secondary reference data source. Trades with missing ref data are parked for 5 minutes to allow propagation time. Set up monitoring for ref data sync lag.","com.trading.exception.ReferenceDataNotFoundException: No reference data found for instrument: ISIN12345
	at com.trading.service.ReferenceDataService.getInstrument(ReferenceDataService.java:189)
	at com.trading.enrichment.InstrumentEnricher.enrich(InstrumentEnricher.java:123)
	at com.trading.processor.TradeEnrichmentProcessor.enrichTrade(TradeEnrichmentProcessor.java:234)
	at com.trading.ingestion.TradeIngestionService.process(TradeIngestionService.java:156)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:345)"
650e8400-e29b-41d4-a716-446655440015,EVT-H015,Kafka consumer lag exceeds threshold: 50000 messages,InfrastructureException,INFRASTRUCTURE,PERFORMANCE_DEGRADATION,trade-consumer-service,0,com.trading.exception.ConsumerLagException,"Root cause: Downstream processing slower than message production rate. Resolution: Scaled consumer instances from 3 to 10. Optimized message processing pipeline by removing blocking I/O. Implemented batch processing for database writes. Added parallel processing for independent trades.","com.trading.exception.ConsumerLagException: Consumer lag critical: 50000 messages behind, threshold: 10000
	at com.trading.monitoring.ConsumerLagMonitor.checkLag(ConsumerLagMonitor.java:123)
	at com.trading.kafka.ConsumerHealthIndicator.health(ConsumerHealthIndicator.java:89)
	at org.springframework.boot.actuate.health.HealthEndpoint.health(HealthEndpoint.java:78)
	at org.springframework.boot.actuate.health.HealthEndpointWebExtension.health(HealthEndpointWebExtension.java:234)"
650e8400-e29b-41d4-a716-446655440016,EVT-H016,Price validation failed: negative price detected,BusinessException,BUSINESS_LOGIC,INVALID_BUSINESS_DATA,ATLAS,6,com.trading.exception.PriceValidationException,"Root cause: Upstream pricing service sending corrupt data with negative prices. Resolution: Added business rule validation for price boundaries (price > 0 and price < reasonable max). Negative or zero prices cause immediate rejection. Implemented statistical anomaly detection for price outliers. Alert pricing team for systematic issues.","com.trading.exception.PriceValidationException: Invalid price: -150.50 for instrument ISIN67890
	at com.trading.validation.PriceValidator.validate(PriceValidator.java:123)
	at com.trading.model.Trade.setPrice(Trade.java:189)
	at com.trading.processor.TradeValidationProcessor.validateBusinessRules(TradeValidationProcessor.java:234)
	at com.trading.ingestion.TradeIngestionService.process(TradeIngestionService.java:156)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)"
650e8400-e29b-41d4-a716-446655440017,EVT-H017,Deadlock detected in trade persistence layer,InfrastructureException,INFRASTRUCTURE,DEADLOCK,trade-ingestion-service,18,com.mysql.cj.jdbc.exceptions.MySQLTransactionRollbackException,"Root cause: Multiple threads trying to update same trade records in different orders. Resolution: Implemented pessimistic locking with timeout. Standardized lock acquisition order by trade_id. Reduced transaction scope to minimize lock duration. Added deadlock retry logic with exponential backoff.","com.mysql.cj.jdbc.exceptions.MySQLTransactionRollbackException: Deadlock found when trying to get lock; try restarting transaction
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.trading.repository.TradeRepository.updateTrade(TradeRepository.java:234)
	at com.trading.service.TradeService.updateTradeStatus(TradeService.java:189)
	at com.trading.processor.TradeUpdateProcessor.process(TradeUpdateProcessor.java:123)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:367)"
650e8400-e29b-41d4-a716-446655440018,EVT-H018,Message deserialization failed: unsupported schema version,ValidationException,VALIDATION,SCHEMA_MISMATCH,ATLAS,2,org.apache.kafka.common.errors.SerializationException,"Root cause: Producer upgraded to schema version 3 but consumer still on version 2. Resolution: Implemented backward compatible schema evolution. Added schema version detection and routing to appropriate deserializer. Updated consumer to support multiple schema versions (v2 and v3). Coordinated rolling upgrade process.","org.apache.kafka.common.errors.SerializationException: Error deserializing key/value for partition trade-events-0 at offset 12345. Schema version 3 not supported
	at org.apache.kafka.common.serialization.Deserializer.deserialize(Deserializer.java:89)
	at org.apache.kafka.clients.consumer.internals.Fetcher.parseRecord(Fetcher.java:1234)
	at com.trading.kafka.MessageHandler.deserializeMessage(MessageHandler.java:123)
	at com.trading.kafka.ConsumerHandler.handleRecord(ConsumerHandler.java:89)
	at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.doInvokeRecordListener(KafkaMessageListenerContainer.java:1567)"
650e8400-e29b-41d4-a716-446655440019,EVT-H019,Quantity mismatch between trade sides: Buy=1000 Sell=1500,BusinessException,BUSINESS_LOGIC,DATA_CONSISTENCY_ERROR,trade-ingestion-service,12,com.trading.exception.TradeBalanceException,"Root cause: Data corruption in multi-leg trade processing. Resolution: Implemented strict trade balance validation. Multi-leg trades must have matching quantities across all legs. Added reconciliation check before persistence. Unbalanced trades are rejected with detailed error showing mismatches. Implemented transaction rollback for consistency.","com.trading.exception.TradeBalanceException: Trade sides do not balance - Buy side: 1000, Sell side: 1500, Difference: 500
	at com.trading.validation.TradeBalanceValidator.validate(TradeBalanceValidator.java:156)
	at com.trading.processor.MultiLegTradeProcessor.process(MultiLegTradeProcessor.java:234)
	at com.trading.service.TradeService.processMultiLegTrade(TradeService.java:189)
	at com.trading.ingestion.TradeIngestionService.ingest(TradeIngestionService.java:123)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)"
650e8400-e29b-41d4-a716-446655440020,EVT-H020,External market data feed disconnected,InfrastructureException,INFRASTRUCTURE,CONNECTION_FAILURE,trade-consumer-service,30,java.io.IOException: Connection reset by peer,"Root cause: Market data provider network instability. Resolution: Implemented automatic reconnection with exponential backoff. Added failover to backup market data feed. Use cached prices during disconnection with staleness indicators. Alert operations team if disconnection exceeds 5 minutes. Implemented heartbeat monitoring.","java.io.IOException: Connection reset by peer
	at java.net.SocketInputStream.read(SocketInputStream.java:209)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at com.trading.marketdata.FeedClient.readData(FeedClient.java:234)
	at com.trading.marketdata.MarketDataService.consumeFeed(MarketDataService.java:189)
	at com.trading.service.PricingService.subscribeToMarketData(PricingService.java:123)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)"
650e8400-e29b-41d4-a716-446655440021,EVT-H021,Authorization failed: user lacks permission for AMEND operation,SecurityException,SECURITY,AUTHORIZATION_FAILURE,trade-ingestion-service,2,org.springframework.security.access.AccessDeniedException,"Root cause: User role not granted AMEND permission in authorization service. Resolution: Updated RBAC configuration to grant TRADER role AMEND permission. Implemented fine-grained permissions per operation type. Added clear error messages indicating required permissions. Created self-service portal for permission requests with approval workflow.","org.springframework.security.access.AccessDeniedException: Access is denied - User 'trader123' lacks permission for operation: AMEND_TRADE
	at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:84)
	at com.trading.security.AuthorizationService.checkPermission(AuthorizationService.java:156)
	at com.trading.service.TradeService.amendTrade(TradeService.java:234)
	at com.trading.processor.AmendEventProcessor.process(AmendEventProcessor.java:123)
	at com.trading.api.TradeController.handleAmend(TradeController.java:189)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:69)"
650e8400-e29b-41d4-a716-446655440022,EVT-H022,FX rate lookup failed for currency pair EUR/JPY,BusinessException,BUSINESS_LOGIC,MISSING_REFERENCE_DATA,trade-ingestion-service,14,com.trading.exception.FxRateNotFoundException,"Root cause: FX rate service missing rates for exotic currency pairs during off-market hours. Resolution: Implemented rate caching with 24-hour retention. Use last known rate with staleness indicator during lookup failures. Added fallback to ECB published rates. For critical trades, park and retry during market hours when live rates available.","com.trading.exception.FxRateNotFoundException: FX rate not available for currency pair: EUR/JPY at timestamp: 2025-01-15T03:30:00Z
	at com.trading.service.FxRateService.getRate(FxRateService.java:189)
	at com.trading.calculation.FxConverter.convert(FxConverter.java:123)
	at com.trading.processor.TradeEnrichmentProcessor.convertToBaseCurrency(TradeEnrichmentProcessor.java:234)
	at com.trading.ingestion.TradeIngestionService.enrich(TradeIngestionService.java:156)
	at org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:345)"
650e8400-e29b-41d4-a716-446655440023,EVT-H023,Memory allocation failed: OutOfMemoryError in trade aggregation,InfrastructureException,INFRASTRUCTURE,RESOURCE_EXHAUSTION,trade-consumer-service,1,java.lang.OutOfMemoryError,"Root cause: Trade aggregation job loading entire day's trades into memory. Resolution: Implemented streaming aggregation with fixed memory footprint. Process trades in micro-batches of 1000. Increased JVM heap from 2GB to 8GB. Added memory monitoring and GC tuning. Implemented spill-to-disk for large aggregations.","java.lang.OutOfMemoryError: Java heap space
	at java.util.ArrayList.grow(ArrayList.java:237)
	at java.util.ArrayList.ensureCapacityInternal(ArrayList.java:189)
	at com.trading.aggregation.TradeAggregator.aggregateByCounterparty(TradeAggregator.java:234)
	at com.trading.service.ReportingService.generateEndOfDayReport(ReportingService.java:156)
	at com.trading.scheduler.ReportingScheduler.runEndOfDayReports(ReportingScheduler.java:89)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)"
650e8400-e29b-41d4-a716-446655440024,EVT-H024,Trade date is in the future: trade_date=2025-12-31 current=2025-01-15,BusinessException,BUSINESS_LOGIC,INVALID_BUSINESS_DATA,ATLAS,9,com.trading.exception.InvalidDateException,"Root cause: Upstream system clock skew or manual date override errors. Resolution: Implemented business date validation with configurable tolerance (max 2 business days in future for forward trades). Reject trades with dates beyond tolerance. Added time synchronization checks between systems. Alert operations for systematic clock skew issues.","com.trading.exception.InvalidDateException: Trade date cannot be in the future: trade_date=2025-12-31, current_date=2025-01-15
	at com.trading.validation.DateValidator.validateTradeDate(DateValidator.java:123)
	at com.trading.model.Trade.setTradeDate(Trade.java:189)
	at com.trading.processor.TradeValidationProcessor.validateDates(TradeValidationProcessor.java:234)
	at com.trading.ingestion.TradeIngestionService.process(TradeIngestionService.java:156)
	at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:123)"
650e8400-e29b-41d4-a716-446655440025,EVT-H025,Retry limit exceeded for trade TRD-77777 after 50 attempts,InfrastructureException,INFRASTRUCTURE,RETRY_EXHAUSTED,trade-consumer-service,50,com.trading.exception.RetryExhaustedException,"Root cause: Persistent downstream service failure preventing trade processing. Resolution: Implemented exponential backoff with jitter. Max retry count set to 10 with manual intervention required beyond that. Failed trades moved to error queue for investigation. Added circuit breaker to prevent cascade failures. Implemented health check before retry attempts.","com.trading.exception.RetryExhaustedException: Retry limit exceeded for trade TRD-77777: attempts=50, max=50, last_error=Connection refused
	at com.trading.retry.RetryHandler.executeWithRetry(RetryHandler.java:234)
	at com.trading.service.TradeService.persistTrade(TradeService.java:189)
	at com.trading.processor.TradePersistenceProcessor.process(TradePersistenceProcessor.java:123)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:329)
	at org.springframework.kafka.listener.adapter.RetryingMessageListenerAdapter.onMessage(RetryingMessageListenerAdapter.java:156)"
650e8400-e29b-41d4-a716-446655440026,EVT-H026,SSL certificate expired for downstream service,InfrastructureException,INFRASTRUCTURE,SECURITY_ERROR,trade-ingestion-service,5,javax.net.ssl.SSLHandshakeException,"Root cause: SSL certificate for settlement service expired. Resolution: Renewed SSL certificate and deployed to all environments. Implemented certificate expiry monitoring with 30-day advance alerts. Added automated certificate renewal process. Created runbook for emergency certificate updates. Reviewed all service certificates and standardized renewal process.","javax.net.ssl.SSLHandshakeException: PKIX path validation failed: java.security.cert.CertPathValidatorException: validity check failed
	at sun.security.ssl.Alert.createSSLException(Alert.java:131)
	at sun.security.ssl.TransportContext.fatal(TransportContext.java:349)
	at com.trading.client.SettlementServiceClient.callService(SettlementServiceClient.java:234)
	at com.trading.service.SettlementService.createObligation(SettlementService.java:156)
	at com.trading.processor.SettlementProcessor.process(SettlementProcessor.java:89)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:745)"
650e8400-e29b-41d4-a716-446655440027,EVT-H027,Circular reference detected in trade allocation chain,BusinessException,BUSINESS_LOGIC,DATA_CONSISTENCY_ERROR,trade-ingestion-service,7,com.trading.exception.CircularReferenceException,"Root cause: Data corruption in allocation hierarchy causing circular parent-child relationships. Resolution: Implemented graph cycle detection algorithm. Reject allocations that would create cycles. Added referential integrity checks. Implemented allocation chain validation before persistence. Created cleanup job to identify and fix existing circular references in database.","com.trading.exception.CircularReferenceException: Circular reference detected in allocation chain: TRD-A100 -> TRD-A200 -> TRD-A300 -> TRD-A100
	at com.trading.validation.AllocationValidator.detectCycles(AllocationValidator.java:189)
	at com.trading.service.AllocationService.validateAllocationChain(AllocationService.java:234)
	at com.trading.processor.AllocationProcessor.process(AllocationProcessor.java:123)
	at com.trading.ingestion.TradeIngestionService.processAllocation(TradeIngestionService.java:156)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)"
650e8400-e29b-41d4-a716-446655440028,EVT-H028,Message size exceeds Kafka limit: 5.2MB > 1MB,ValidationException,VALIDATION,MESSAGE_TOO_LARGE,ATLAS,3,org.apache.kafka.common.errors.RecordTooLargeException,"Root cause: Trade messages with large embedded payloads (full order books or large attachments). Resolution: Implemented message size validation at producer. Large payloads stored in S3 with reference in Kafka message. Increased Kafka max.message.bytes to 2MB for legitimate large trades. Added compression for message payloads. Created guidance for upstream teams on message size limits.","org.apache.kafka.common.errors.RecordTooLargeException: The message is 5452389 bytes when serialized which is larger than the maximum request size you have configured with the max.request.size configuration (1048576 bytes)
	at org.apache.kafka.clients.producer.KafkaProducer.doSend(KafkaProducer.java:949)
	at org.apache.kafka.clients.producer.KafkaProducer.send(KafkaProducer.java:885)
	at com.trading.kafka.ProducerService.sendMessage(ProducerService.java:123)
	at com.trading.service.EventPublisher.publishTradeEvent(EventPublisher.java:89)
	at com.trading.ingestion.TradeIngestionService.publishToDownstream(TradeIngestionService.java:234)"
650e8400-e29b-41d4-a716-446655440029,EVT-H029,Regulatory reporting validation failed: missing LEI code,BusinessException,BUSINESS_LOGIC,REGULATORY_VALIDATION_ERROR,trade-ingestion-service,11,com.trading.exception.RegulatoryValidationException,"Root cause: Counterparties without valid Legal Entity Identifier (LEI) codes. Resolution: Implemented LEI validation against GLEIF database. Reject trades for counterparties without valid LEI. Added LEI lookup service with caching. Created process for onboarding team to ensure LEI captured during counterparty setup. Implemented exemption workflow for non-regulated counterparties.","com.trading.exception.RegulatoryValidationException: Regulatory validation failed - Missing required LEI code for counterparty: CP-98765
	at com.trading.compliance.RegulatoryValidator.validateLEI(RegulatoryValidator.java:234)
	at com.trading.compliance.ComplianceService.validateTrade(ComplianceService.java:156)
	at com.trading.processor.ComplianceCheckProcessor.process(ComplianceCheckProcessor.java:89)
	at com.trading.ingestion.TradeIngestionService.runComplianceChecks(TradeIngestionService.java:234)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)"
650e8400-e29b-41d4-a716-446655440030,EVT-H030,Distributed transaction commit failed: 2PC timeout,InfrastructureException,INFRASTRUCTURE,TRANSACTION_FAILURE,trade-ingestion-service,16,javax.transaction.RollbackException,"Root cause: Two-phase commit timeout due to slow participant in distributed transaction. Resolution: Reduced 2PC timeout from 60s to 30s to fail fast. Implemented saga pattern for long-running workflows. Added compensating transactions for rollback scenarios. Migrated critical flows to event-driven eventual consistency model. Improved monitoring for transaction coordinator health.","javax.transaction.RollbackException: Transaction rolled back due to timeout in prepare phase
	at com.atomikos.icatch.jta.TransactionImp.commit(TransactionImp.java:234)
	at org.springframework.transaction.jta.JtaTransactionManager.doCommit(JtaTransactionManager.java:1034)
	at com.trading.service.TradeService.executeDistributedTransaction(TradeService.java:345)
	at com.trading.processor.DistributedTradeProcessor.process(DistributedTradeProcessor.java:189)
	at com.trading.ingestion.TradeIngestionService.processWithXA(TradeIngestionService.java:123)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:367)"
